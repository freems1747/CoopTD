<!doctype html>
<html lang="ko">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>초마신 해방 시뮬레이터</title>
  <link rel="stylesheet" href="./styles.css" />
</head>
<body>

  <div class="wrap">
    <div class="row">
      <label>초마신</label>
      <select id="unitSelect"></select>
    </div>

    <!-- 시작 LV + 시작 실패횟수 -->
    <div class="row rowStart">
      <label>시작 LV</label>
      <div class="startLvWrap">
        <input id="startLvField" type="number" inputmode="numeric" min="0" max="20" value="0">
        <input id="startFailField" type="number" inputmode="numeric" min="0" value="" placeholder="시작 실패횟수">
        <button id="applyStartLvBtn" type="button">적용</button>
      </div>
    </div>

    <div class="row">
      <label>현재 LV</label>
      <input id="lvField" readonly value="0">
    </div>

    <div class="btn-row">
      <button id="enhanceBtn">강화</button>
      <button id="autoEnhanceBtn" type="button">자동강화</button>
      <button id="simBtn" type="button">시뮬레이션</button>
      <button id="resetBtn" type="button">리셋</button>
    </div>

    <div class="row">
      <label>누적 해방석 소모량</label>
      <input id="stoneField" readonly value="0">
    </div>

    <div class="row">
      <label>현재 강화 확률</label>
      <input id="chanceField" readonly value="0%">
    </div>

    <div class="row">
      <label>현재 실패 횟수</label>
      <input id="failField" readonly value="0">
    </div>

    <div class="info" id="chanceInfo">강화 정보가 없습니다.</div>

    <!-- 표 형태: 강화로그 | 구간별 시도횟수 -->
    <div class="gridTable">
      <div class="th th-left">
        <div class="thTitle">강화로그</div>
        <div class="thSummary">
          총 시도 <span id="sumAttempts">0</span>회 ·
          성공 <span id="sumSuccess">0</span>회 ·
          실패 <span id="sumFail">0</span>회
        </div>
      </div>
      <div class="th th-right">
        <div class="thTitle">구간별 시도횟수</div>
        <div class="thSummary">&nbsp;</div>
      </div>

      <div class="td">
        <div class="log" id="logBox">준비 완료</div>
      </div>
      <div class="td">
        <div class="attempts-list" id="attemptList">아직 시도 없음</div>
      </div>
    </div>
  </div>

  <!-- 도움말 버튼 -->
  <button id="helpBtn" aria-label="help">?</button>

  <!-- README 패널 -->
  <div id="helpPanel" class="help-panel">
    <div class="help-header">
      <span>도움말</span>
    </div>

    <div class="help-content">
      <h3>강화 시뮬레이터 사용법</h3>
      <ul>
        <li>시작 LV / 시작 실패횟수를 적용하면 실제 게임 상황을 재현할 수 있습니다.</li>
        <li>실패 시 확률은 +1%씩 증가하며 최대 +5%까지 적용됩니다.</li>
        <li>자동강화는 목표 레벨까지 0.1초 간격으로 진행됩니다.</li>
        <li>시뮬레이션은 현재 상태 기준으로 평균 소모량을 계산합니다.</li>
      </ul>

      <h4>시뮬레이션</h4>
      <p>
        목표 레벨과 반복 횟수(최대 1000)를 입력하면<br>
        목표까지 도달하는 과정을 여러 번 반복하여<br>
        평균 해방석 소모량을 계산합니다.
      </p>

      <p style="margin-top:12px; opacity:.7;">
        ※ 이 페이지는 클라이언트 전용 시뮬레이터입니다.
      </p>
      <p>by. 도시검은강쥐</p>
    </div>
  </div>
  <footer class="footer">
    © 2026 CoopTD Enhancement Simulator. All rights reserved. 도시검은강쥐
  </footer>
  <script src="./app.js"></script>
</body>
</html>
